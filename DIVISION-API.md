# Division API

**AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ API**

1ã¤ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’é€ã‚‹ã ã‘ã§ã€æœ€é©ãªAIãƒ¢ãƒ‡ãƒ«ãŒè‡ªå‹•ã§å½¹å‰²åˆ†æ‹…ã—ã€ã‚¿ã‚¹ã‚¯ã‚’å®Œé‚ã—ã¾ã™ã€‚

---

## æ¦‚è¦

Division APIã¯ã€è¤‡æ•°ã®AIãƒ¢ãƒ‡ãƒ«ã‚’**å½¹å‰²ãƒ™ãƒ¼ã‚¹**ã§è‡ªå‹•æŒ¯ã‚Šåˆ†ã‘ã‚‹ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³APIã§ã™ã€‚

Leader AI ãŒãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’åˆ†æã—ã€ã€Œæ¤œç´¢ã€ã€Œè¨­è¨ˆã€ã€Œã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã€ã€Œãƒ¬ãƒ“ãƒ¥ãƒ¼ã€ãªã©ã®ã‚µãƒ–ã‚¿ã‚¹ã‚¯ã«åˆ†è§£ã€‚å„ã‚¿ã‚¹ã‚¯ã‚’æœ€é©ãªAIãƒ¢ãƒ‡ãƒ«ã«å‰²ã‚Šå½“ã¦ã€çµæœã‚’ãƒã‚§ãƒ¼ãƒ³ã—ã¦æœ€çµ‚æˆæœç‰©ã‚’ç”Ÿæˆã—ã¾ã™ã€‚

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼: ã€Œã‚¯ã‚¤ã‚ºã‚¢ãƒ—ãƒªã‚’ä½œã£ã¦ã€
         â†“
    ğŸ§  Leader AI (Gemini 2.5 Flash)
    ã‚¿ã‚¹ã‚¯ã‚’åˆ†æãƒ»åˆ†è§£
         â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Step 1: ğŸ” Search â†’ Perplexity Sonar Pro   â”‚
    â”‚  Step 2: ğŸ“‹ Planning â†’ Gemini 2.5 Pro       â”‚
    â”‚  Step 3: ğŸ’» Coding â†’ Claude Sonnet 4.5      â”‚
    â”‚  Step 4: âœ… Review â†’ GPT-4.1                â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
    çµ±åˆã•ã‚ŒãŸæˆæœç‰©ã‚’è¿”å´
```

## ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

**Base URL**: `https://api.division.he-ro.jp`

### `POST /api/agent/run` â€” ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè¡Œ

AIã«ã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œã•ã›ã¾ã™ã€‚

```json
{
  "projectId": "demo-project-001",
  "input": "ã‚¯ã‚¤ã‚ºã‚’æŠ•ç¨¿ã™ã‚‹ã‚¢ãƒ—ãƒªã€Œãƒªãƒ‰ãƒ«ã€ã‚’ä½œã£ã¦",
  "overrides": {
    "coding": "claude-opus-4.6",
    "search": "grok-4.1-fast"
  }
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹:**

```json
{
  "sessionId": "860be374-a6a5-4682-b651-ae864188a491",
  "leaderProvider": "Gemini (Google)",
  "leaderModel": "gemini-2.5-flash",
  "status": "success",
  "totalDurationMs": 12450,
  "tasks": [
    {
      "role": "search",
      "provider": "Perplexity Sonar Pro",
      "model": "sonar-pro",
      "reason": "æœ€æ–°æƒ…å ±ã®åé›†",
      "output": "...",
      "status": "success",
      "durationMs": 3200
    }
  ]
}
```

### `GET /api/models` â€” ãƒ¢ãƒ‡ãƒ«ä¸€è¦§

åˆ©ç”¨å¯èƒ½ãªå…¨AIãƒ¢ãƒ‡ãƒ«ã‚’å–å¾—ã—ã¾ã™ã€‚

### `GET /health` â€” ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯

### `POST /mcp` â€” MCPæ¥ç¶š

IDE (Cursor, Antigravity, Claude Desktop) ã‹ã‚‰MCPãƒ—ãƒ­ãƒˆã‚³ãƒ«ã§æ¥ç¶šã§ãã¾ã™ã€‚

---

## å¯¾å¿œãƒ¢ãƒ‡ãƒ«ï¼ˆ38ãƒ¢ãƒ‡ãƒ« / 6ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ï¼‰

| ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼      | ãƒ¢ãƒ‡ãƒ«                                                            |
| ----------------- | ----------------------------------------------------------------- |
| ğŸŸ£ **Anthropic**  | Claude Opus 4.6, Sonnet 4.5, Haiku 4.5, Sonnet 4, Opus 4, Haiku 3 |
| ğŸ”µ **Google**     | Gemini 3 Pro/Flash, 2.5 Pro/Flash, 2.0 Flash                      |
| ğŸŸ¢ **OpenAI**     | GPT-5.2, 5.1, 4.1/Mini/Nano, 4o/Mini, o3/Mini                     |
| ğŸŸ  **Perplexity** | Deep Research, Reasoning Pro, Sonar Pro, Sonar                    |
| âš« **xAI**        | Grok 4.1 Fast, 4, 3, 3 Mini                                       |
| ğŸ”´ **DeepSeek**   | V3.2, R1                                                          |

## å½¹å‰²ï¼ˆãƒ­ãƒ¼ãƒ«ï¼‰

| ãƒ­ãƒ¼ãƒ«     | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆAI         | èª¬æ˜                     |
| ---------- | -------------------- | ------------------------ |
| `coding`   | Claude Sonnet 4.5    | ã‚³ãƒ¼ãƒ‰ç”Ÿæˆãƒ»å®Ÿè£…         |
| `search`   | Perplexity Sonar Pro | æƒ…å ±æ¤œç´¢ãƒ»èª¿æŸ»           |
| `planning` | Gemini 2.5 Pro       | è¨­è¨ˆãƒ»ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£     |
| `writing`  | Claude Sonnet 4.5    | ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ»æ–‡ç« ä½œæˆ   |
| `review`   | GPT-4.1              | ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ»å“è³ªç¢ºèª |
| `leader`   | Gemini 2.5 Flash     | ã‚¿ã‚¹ã‚¯åˆ†è§£ãƒ»çµ±æ‹¬         |

## overridesï¼ˆãƒ¢ãƒ‡ãƒ«åˆ‡ã‚Šæ›¿ãˆï¼‰

`overrides` ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ã€ç‰¹å®šã®å½¹å‰²ã«ä½¿ã†AIã‚’è‡ªç”±ã«åˆ‡ã‚Šæ›¿ãˆã§ãã¾ã™ã€‚

```json
{
  "overrides": {
    "coding": "deepseek-r1",
    "search": "grok-4.1-fast",
    "review": "gpt-5.2",
    "planning": "gemini-3-pro"
  }
}
```

## MCPæ¥ç¶šï¼ˆIDEçµ±åˆï¼‰

Cursor / Antigravity / Claude Desktop ã®MCPè¨­å®šã«è¿½åŠ ã™ã‚‹ã ã‘ã§ä½¿ãˆã¾ã™ã€‚

```json
{
  "mcpServers": {
    "division": {
      "url": "https://api.division.he-ro.jp/mcp"
    }
  }
}
```

### MCPãƒ„ãƒ¼ãƒ«

| ãƒ„ãƒ¼ãƒ«                 | èª¬æ˜                               |
| ---------------------- | ---------------------------------- |
| `division_run`         | AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œã•ã›ã‚‹ |
| `division_list_models` | åˆ©ç”¨å¯èƒ½ãªå…¨ãƒ¢ãƒ‡ãƒ«ã‚’ä¸€è¦§è¡¨ç¤º       |
| `division_health`      | APIã®ç¨¼åƒçŠ¶æ…‹ã‚’ç¢ºèª                |

---

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

- **Runtime**: Node.js + TypeScript
- **Framework**: Express
- **Database**: SQLite + Prisma ORM
- **Hosting**: Vercel (Serverless)
- **Protocol**: JSON-RPC 2.0 (MCP)
